{"ast":null,"code":"import CartList from \"@/components/CartList.vue\";\nimport NavBar from \"../components/NavBar.vue\";\nimport axios from \"axios\";\nexport default {\n  components: {\n    NavBar,\n    CartList\n  },\n  data: () => ({\n    totalSum: 0,\n    showDialog: false,\n    toUpdateItem: {\n      name: \"\",\n      price: 0,\n      amount: 0\n    },\n    editAmount: 0,\n    maxAmount: 0,\n    warningText: \"\",\n    cartItems: [{\n      id: \"123\",\n      img: \"01.png\",\n      productName: \"Crabbe Trabbe\",\n      size: \"7cm\",\n      price: \"45,50 €\",\n      amount: 1\n    }, {\n      id: \"345\",\n      img: \"02.png\",\n      productName: \"Crabbe Trabbe\",\n      size: \"12cm\",\n      price: \"45,50 €\",\n      amount: 1\n    }, {\n      id: \"123\",\n      img: \"01.png\",\n      productName: \"Crabbe Trabbe\",\n      size: \"7cm\",\n      price: \"45,50 €\",\n      amount: 1\n    }, {\n      id: \"345\",\n      img: \"02.png\",\n      productName: \"Crabbe Trabbe\",\n      size: \"12cm\",\n      price: \"45,50 €\",\n      amount: 1\n    }, {\n      id: \"123\",\n      img: \"01.png\",\n      productName: \"Crabbe Trabbe\",\n      size: \"7cm\",\n      price: \"45,50 €\",\n      amount: 1\n    }, {\n      id: \"345\",\n      img: \"02.png\",\n      productName: \"Crabbe Trabbe\",\n      size: \"12cm\",\n      price: \"45,50 €\",\n      amount: 1\n    }]\n  }),\n  methods: {\n    updateItem: function (id) {\n      this.toUpdateItem = this.cartItems.find(item => item.id === id);\n      this.editAmount = this.toUpdateItem.amount;\n      this.showDialog = true;\n      axios.get('http://localhost:8402/product/' + this.toUpdateItem.productId, {\n        headers: {\n          'Authorization': `Bearer ${this.$keycloak.token}`\n        }\n      }).then(response => this.maxAmount = response.data.amount);\n    },\n    incrementAmount: function () {\n      if (this.editAmount === this.maxAmount) {\n        this.warningText = \"Only \" + this.maxAmount + \" items left.\";\n      } else {\n        this.editAmount++;\n        this.warningText = \"\";\n      }\n    },\n    decrementAmount: function () {\n      if (this.editAmount === 0) {\n        this.warningText = \"Amount cannot go under 0.\";\n      } else {\n        this.editAmount--;\n        this.warningText = \"\";\n      }\n    },\n    changeAmount: function () {\n      axios.put('http://localhost:8402/changeAmount?username=' + this.$username, this.toUpdateItem, {\n        headers: {\n          'Authorization': `Bearer ${this.$keycloak.token}`\n        }\n      }).then(() => {\n        this.reloadCart();\n        this.closeDialog();\n      });\n    },\n    reloadCart: function () {\n      axios.get('http://localhost:8402/cart?username=' + this.$username, {\n        headers: {\n          'Authorization': `Bearer ${this.$keycloak.token}`\n        }\n      }).then(response => {\n        this.cartItems = response.data.items;\n        this.totalSum = response.data.totalAmount;\n        console.log(this.cartItems);\n      });\n    },\n    closeDialog: function () {\n      this.showDialog = false;\n    }\n  },\n  mounted() {\n    this.reloadCart();\n  }\n};","map":{"version":3,"mappings":"AAwGA;AACA;AACA;AACA;EACAA;IACAC;IACAC;EACA;EAEAC;IACAC;IACAC;IACAC;MAAAC;MAAAC;MAAAC;IAAA;IACAC;IACAC;IACAC;IACAC,YACA;MAAAC;MAAAC;MAAAC;MAAAC;MAAAT;MAAAC;IAAA,GACA;MAAAK;MAAAC;MAAAC;MAAAC;MAAAT;MAAAC;IAAA,GACA;MAAAK;MAAAC;MAAAC;MAAAC;MAAAT;MAAAC;IAAA,GACA;MAAAK;MAAAC;MAAAC;MAAAC;MAAAT;MAAAC;IAAA,GACA;MAAAK;MAAAC;MAAAC;MAAAC;MAAAT;MAAAC;IAAA,GACA;MAAAK;MAAAC;MAAAC;MAAAC;MAAAT;MAAAC;IAAA;EAEA;EACAS;IACAC;MACA;MACA;MACA;MACAC,MACAC;QACAC;UACA;QAEA;MAAA,GACAC,iBACA,qCACA;IACA;IACAC;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACAN,MACAO;QACAL;UACA;QACA;MAAA,GACAC;QACA;QACA;MACA,EACA;IAEA;IACAK;MACAR,MACAC;QACAC;UACA;QAEA;MAAA,GACAC;QACA;QACA;QACAM;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;EACA;AACA","names":["components","NavBar","CartList","data","totalSum","showDialog","toUpdateItem","name","price","amount","editAmount","maxAmount","warningText","cartItems","id","img","productName","size","methods","updateItem","axios","get","headers","then","incrementAmount","decrementAmount","changeAmount","put","reloadCart","console","closeDialog","mounted"],"sourceRoot":"src/views","sources":["CartReviewView.vue"],"sourcesContent":["<template>\n    <v-app>\n      <NavBar />\n      <v-container fluid class=\"paddingTop100 px-15\">\n    <v-row>\n        <v-col cols=\"12\">\n        <h1 class=\"variableFontSize\">Mein Warenkorb</h1>\n     </v-col>\n    </v-row>\n    <v-row>\n        <v-col cols=\"lg-8\">\n          <CartList :cartItems=\"cartItems\" :updateItem=\"updateItem\"/>\n        </v-col>\n        <v-col cols=\"lg-4\">\n          <v-card elevation=\"10\" class=\"pt-10 px-10 sticky rounded-border\">\n          <h2 class=\"alignleft mb-5\">Gesamtbetrag</h2>\n          <v-row>\n            <v-col cols=\"xs-8\" >\n              <h3 class=\"alignleft\">Zwischensumme</h3>\n            </v-col>\n            <v-col cols=\"xs-4\">\n              <h3 class=\"rightAlign\"> {{ totalSum }} €</h3>\n        \n            </v-col>\n          </v-row>\n\n          <v-row>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      label=\"Gutscheincode\"\n                      class=\"d-none d-sm-none d-md-flex\"\n                      filled\n                      prepend-inner-icon=\"mdi-magnify\"\n                      solo\n                      flat\n                      background-color=\"\"\n                      rounded\n                      outlined\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"2\" class=\"marginLeft\">\n                    <v-btn\n                      color=\"grey\"\n                      rounded\n                      dark\n                      x-large\n                      class=\"py-7 d-none d-sm-none d-md-flex\" \n                    >\n                      EINLÖSEN\n                    </v-btn>\n                  </v-col>\n                </v-row>\n                <v-row>\n                  <v-col cols=\"xs-8\">\n              <h3 class=\"alignleft\">Gesamtsumme</h3>\n            </v-col>\n            <v-col cols=\"xs-4\">\n              <h3 class=\"rightAlign\">{{totalSum}} €</h3>\n        \n            </v-col>\n                </v-row>\n              <v-row>\n                <v-col cols=\"lg-12\">\n                  <v-btn color=\"purple\"\n                      rounded dark x-large class=\"fullWidth\">ZUR KASSE</v-btn>\n                </v-col>\n              </v-row>\n        </v-card>\n        </v-col>\n    </v-row>\n    <v-dialog id=\"cartDialog\" v-model=\"showDialog\" class=\"width50\">\n          <div class=\" my-10 flex spaceBetween px-10\">\n          <h2>Artikel bearbeiten</h2>\n          <v-btn icon @click=\"closeDialog()\"><v-icon>mdi-close</v-icon></v-btn>\n          </div>\n          <v-row class=\"px-10 pb-10\">\n            <v-col cols=\"4\">\n              <div><v-img  :src=toUpdateItem.imageLink class=\"roundedBorder\"></v-img></div>\n            </v-col>\n            <v-col cols=\"8\">\n              <h2>{{toUpdateItem.productname}}</h2>\n              <h1>{{toUpdateItem.productPrice}} EUR</h1>\n              <v-row class=\"my-5\">\n              \n                <v-col cols=\"6\">\n                  <v-row>\n                  <v-btn icon @click=\"decrementAmount()\"><v-icon>mdi-minus</v-icon></v-btn>\n                  <h3>{{editAmount}}</h3>\n                  <v-btn icon @click=\"incrementAmount()\" ><v-icon>mdi-plus</v-icon></v-btn>\n                  </v-row>\n                  <h4>{{warningText}}</h4>\n                </v-col>\n                <v-col cols=\"6\">\n                  <v-btn rounded large color=\"purple\" dark  elevation=\"5\" @click=\"changeAmount()\"> Speichern </v-btn>\n                </v-col>\n              </v-row>\n            </v-col>\n          </v-row>\n        </v-dialog>\n    \n      </v-container>\n    </v-app>\n</template>\n<script>\nimport CartList from \"@/components/CartList.vue\";\nimport NavBar from \"../components/NavBar.vue\";\nimport axios from \"axios\";\n  export default {\n  components: {\n    NavBar,\n    CartList\n},\n\n  data: () => ({\n    totalSum: 0,\n    showDialog: false,\n    toUpdateItem: {name:\"\", price: 0, amount: 0},\n    editAmount: 0,\n    maxAmount:0,\n    warningText: \"\",\n    cartItems: [\n        {id:\"123\", img: \"01.png\", productName: \"Crabbe Trabbe\", size: \"7cm\", price: \"45,50 €\", amount: 1},\n        {id: \"345\",img: \"02.png\", productName: \"Crabbe Trabbe\", size: \"12cm\", price: \"45,50 €\", amount: 1},\n        {id:\"123\", img: \"01.png\", productName: \"Crabbe Trabbe\", size: \"7cm\", price: \"45,50 €\", amount: 1},\n        {id: \"345\",img: \"02.png\", productName: \"Crabbe Trabbe\", size: \"12cm\", price: \"45,50 €\", amount: 1},\n        {id:\"123\", img: \"01.png\", productName: \"Crabbe Trabbe\", size: \"7cm\", price: \"45,50 €\", amount: 1},\n        {id: \"345\",img: \"02.png\", productName: \"Crabbe Trabbe\", size: \"12cm\", price: \"45,50 €\", amount: 1},\n    ]\n  }),\n  methods:{\n    updateItem: function(id){\n      this.toUpdateItem = this.cartItems.find(item => item.id === id);\n      this.editAmount = this.toUpdateItem.amount;\n      this.showDialog= true;\n      axios\n      .get('http://localhost:8402/product/'+this.toUpdateItem.productId,{\n      headers: {\n        'Authorization': `Bearer ${this.$keycloak.token}`\n\n      }})\n      .then(response => (\n        this.maxAmount = response.data.amount\n        ))\n    },\n    incrementAmount: function(){\n      if(this.editAmount === this.maxAmount){\n        this.warningText = \"Only \"+this.maxAmount+\" items left.\";\n      }else{\n        this.editAmount++;\n        this.warningText = \"\";\n      }\n    },\n    decrementAmount: function(){\n      if(this.editAmount === 0){\n        this.warningText = \"Amount cannot go under 0.\"\n      }else{\n        this.editAmount--;\n        this.warningText = \"\";\n      }\n    },\n    changeAmount: function(){\n      axios\n      .put('http://localhost:8402/changeAmount?username='+this.$username, this.toUpdateItem,{\n      headers: {\n        'Authorization': `Bearer ${this.$keycloak.token}`\n      }})\n      .then(() => {\n        this.reloadCart();\n        this.closeDialog();\n      }\n      )\n\n    },\n    reloadCart: function(){\n      axios\n      .get('http://localhost:8402/cart?username='+this.$username,{\n      headers: {\n        'Authorization': `Bearer ${this.$keycloak.token}`\n\n      }})\n      .then(response => {\n        this.cartItems = response.data.items;\n        this.totalSum = response.data.totalAmount;\n        console.log(this.cartItems);\n      })\n    },\n    closeDialog: function(){\n      this.showDialog = false;\n    }\n  },\n  mounted () {\n    this.reloadCart();\n  }\n}\n</script>\n<style>\n.rounded-border{\n  border-radius: 25px !important;\n}\n.sticky {\n  position: sticky;\n  top: 100px;\n}\n.marginLeft{\n  margin-top: 10px;\n  margin-left: -144px;\n}\n.paddingTop100{\n    padding-top: 100px !important;\n  }\n  .alignleft {\n    text-align: left !important;\n  }\n  .fullWidth {\n    width: 100% !important;\n  }\n.rightAlign{\n  text-align: right !important;\n}\n  .wrapper {\n\tdisplay: flex;\n}\n.quantity {\n  border: none;\n  text-align: center;\n    width: 50px;\n \n  font-size: 16px;\n  color: #43484D;\n  font-weight: 400;\n\tborder: 2px solid #55439d;\n  border-radius: 25px;\n}\n.opacText{\n  opacity: 0.5;\n  font-weight: 700;\n}\n.shadowCenter{\n    box-shadow: 0 0.125rem 0.5rem 0 rgb(88 88 88 / 32%);\n  }\n\n  @media screen and (min-width: 375px){\n    .variableFontSize {\n    font-size: calc(24px + 24*(100vw - 375px)/ 1545);\n  }\n}\n@media screen and (min-width: 48em){\n.changeOrderCol {\n    margin-top: 0.5rem;\n    order: 3;\n}\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}